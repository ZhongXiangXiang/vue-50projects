import{d as y,r as c,B as S,q as g,E as x,o as r,c as n,a as _,F as z,m as k,D as p,l as F,h as w,b as B,w as M,t as N}from"./index-CHGlN5Fw.js";const V=y({__name:"MyVirtualScroller",props:{items:{type:Array,default:()=>[]},itemSize:{type:Number,default:50},keyField:{type:String,default:"id"}},setup(d){const e=d,s=c([]),t=S(()=>e.items.length*e.itemSize+"px");g(()=>{o()}),x(()=>{console.log("updated..")});const l=c();function o(){const i=l.value.scrollTop,m=l.value.clientHeight;let a=Math.floor(i/e.itemSize)||0,f=Math.ceil((i+m)/e.itemSize);const h=a*e.itemSize;s.value=e.items.slice(a,f).map((u,v)=>({...u,item:u,position:h+e.itemSize*v})),console.log("setpool",s.value,s.value[0][e.keyField])}return(i,m)=>(r(),n("div",{class:"my-recycle-container",ref_key:"container",ref:l,onScroll:o},[_("div",{class:"my-recycle-wrapper",style:p({height:t.value})},[(r(!0),n(z,null,k(s.value,a=>(r(),n("div",{key:a[e.keyField],class:"my-recycle-item",style:p({transform:`translateY(${a.position}px)`})},[F(i.$slots,"default",{item:a.item})],4))),128))],4)],544))}}),T={class:"wrapper"},$={class:"user"},C=y({__name:"index",setup(d){let e=[];for(let t=0;t<1e4;t++)e.push({id:t,name:"name"+t});const s=c(e);return(t,l)=>(r(),n("div",T,[w("hh "),B(V,{class:"scroller",items:s.value,"item-size":32,"key-field":"id"},{default:M(({item:o})=>[_("div",$,N(o.name),1)]),_:1},8,["items"])]))}});export{C as default};
