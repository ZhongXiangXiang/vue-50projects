import{d as y,r as c,C as S,s as g,G as x,o as r,c as n,a as _,F as z,m as k,E as p,l as F,h as w,b as M,w as N,t as V}from"./index-B_aWdXqq.js";const B=y({__name:"MyVirtualScroller",props:{items:{type:Array,default:()=>[]},itemSize:{type:Number,default:50},keyField:{type:String,default:"id"}},setup(d){const e=d,s=c([]),t=S(()=>e.items.length*e.itemSize+"px");g(()=>{o()}),x(()=>{console.log("updated..")});const l=c();function o(){const i=l.value.scrollTop,m=l.value.clientHeight;let a=Math.floor(i/e.itemSize)||0,f=Math.ceil((i+m)/e.itemSize);const h=a*e.itemSize;s.value=e.items.slice(a,f).map((u,v)=>({...u,item:u,position:h+e.itemSize*v})),console.log("setpool",s.value,s.value[0][e.keyField])}return(i,m)=>(r(),n("div",{class:"my-recycle-container",ref_key:"container",ref:l,onScroll:o},[_("div",{class:"my-recycle-wrapper",style:p({height:t.value})},[(r(!0),n(z,null,k(s.value,a=>(r(),n("div",{key:a[e.keyField],class:"my-recycle-item",style:p({transform:`translateY(${a.position}px)`})},[F(i.$slots,"default",{item:a.item})],4))),128))],4)],544))}}),C={class:"wrapper"},T={class:"user"},b=y({__name:"index",setup(d){let e=[];for(let t=0;t<1e4;t++)e.push({id:t,name:"name"+t});const s=c(e);return(t,l)=>(r(),n("div",C,[w("hh "),M(B,{class:"scroller",items:s.value,"item-size":32,"key-field":"id"},{default:N(({item:o})=>[_("div",T,V(o.name),1)]),_:1},8,["items"])]))}});export{b as default};
